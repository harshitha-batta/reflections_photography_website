<%- include('./layouts/main', { title: 'Profile' }) %>
<div class="profile-page">
  <h1>Welcome, <%= user.name %>!</h1>
  <p>Email: <%= user.email %></p>

  <% if (user.role === 'admin') { %>
    <h2>Admin Actions</h2>
    <ul>
      <li><a href="/admin/dashboard">View Dashboard</a></li>
      <li><a href="/admin/manage-users">Manage Users</a></li>
      <li><a href="/admin/manage-photos">Manage Photos</a></li>
      <li><a href="/admin/manage-comments">Moderate Comments</a></li>
    </ul>
  <% } else { %>
    <h2>User Actions</h2>
    <ul>
      <li><a href="/gallery">Browse Galleries</a></li>
      <li><a href="/profile/photos">Your Uploaded Photos</a></li>
      <li><a href="/profile/likes">Your Liked Photos</a></li>
      <li><a href="/profile/comments">Your Comments</a></li>
    </ul>
  <% } %>

  <h2>Upload a Photo</h2>
  <form action="/auth/profile/upload-photo" method="POST" enctype="multipart/form-data">
    <label for="photo">Choose a photo:</label>
    <input type="file" name="photo" id="photo" required>
    <label for="caption">Caption:</label>
    <input type="text" name="caption" id="caption" placeholder="Add a caption (optional)">
    <button type="submit">Upload</button>
  </form>

  <h2>Your Uploaded Photos</h2>
  <% if (photos && photos.length > 0) { %>
    <div class="photo-gallery">
      <% photos.forEach(photo => { %>
        <div class="photo-item">
          <img src="<%= photo.url %>" alt="Uploaded Photo">
          <p><%= photo.caption %></p>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <p>No photos uploaded yet.</p>
  <% } %>

  <a href="/auth/logout">Logout</a>
</div>
