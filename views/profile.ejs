<%- include('./layouts/main', { title: 'Profile' }) %>
<div class="profile-page">
  <h1>Welcome, <%= user.name %>!</h1>
  <p>Email: <%= user.email %></p>

  <!-- Display Profile Photo -->
<div class="profile-photo">
  <h2>Profile Photo</h2>
  <% if (user.profilePhoto) { %>
    <img src="/profile/profile-photo/<%= encodeURIComponent(user.profilePhoto) %>" alt="Profile Photo" class="profile-photo-img" />
  <% } else { %>
    <p>No profile photo uploaded yet.</p>
  <% } %>
  <form action="/profile/upload-profile-photo" method="POST" enctype="multipart/form-data">
    <label for="profilePhoto">Upload New Profile Photo:</label>
    <input type="file" name="profilePhoto" id="profilePhoto" required />
    <button type="submit">Upload</button>
  </form>
</div>


    

  <!-- Editable Profile Information -->
  <div class="profile-edit">
    <h2>Edit Profile</h2>
    <form action="/profile/update-bio" method="POST">
      <label for="bio">Bio:</label>
      <textarea id="bio" name="bio"><%= user.bio || '' %></textarea>
      <button type="submit">Update Bio</button>
    </form>
  </div>

  <% if (user.role === 'admin') { %>
    <!-- Admin-Specific Actions -->
    <h2>Admin Dashboard</h2>
    <ul>
      <li><a href="/admin/manage-galleries">Manage Galleries</a></li>
      <li><a href="/admin/manage-comments">Moderate Comments</a></li>
      <li><a href="/admin/user-activity">View User Activity</a></li>
    </ul>
  <% } else { %>
    <!-- User-Specific Content -->

<h2>Your Photos</h2>
<ul>
  <% photos.forEach(photo => { %>
    <li>
      <h3><%= photo.title %></h3>
      <p><%= photo.description %></p>
      <img src="/profile/image/<%= photo.imagePath %>" alt="<%= photo.title %>" />
    </li>
  <% }) %>
</ul>

  <% } %>

  <!-- Upload Photos Section -->
  <div class="upload-photo">
    <h2>Upload Photos</h2>
    <form action="/profile/upload-photo" method="POST" enctype="multipart/form-data">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" placeholder="Photo Title" required />
      
      <label for="description">Description:</label>
      <textarea id="description" name="description" placeholder="Photo Description"></textarea>
      
      <label for="category">Category:</label>
      <select id="category" name="category" required>
        <option value="Landscapes">Landscapes</option>
        <option value="Portraits">Portraits</option>
        <option value="Abstract">Abstract</option>
        <option value="Other">Other</option>
      </select>
      
      <label for="tags">Tags:</label>
      <input type="text" id="tags" name="tags" placeholder="Tags (comma-separated)" />
      
      <label for="photo">Upload Photo:</label>
      <input type="file" id="photo" name="photo" required />
      
      <button type="submit">Upload Photo</button>
    </form>
  </div>

  <a href="/auth/logout">Logout</a>
</div>
